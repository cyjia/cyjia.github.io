<!DOCTYPE html>
<html>

  {% include math-head.html %}

    <body>
        <div class="page-content">
            <div class="wrapper">
                {{ content }}
            </div>
        </div>
        <div class="math-editor">
            <ul class="symbols-panel">
                {% for symbol in site.data.msymbols %}
                <li class="equation" data-expr="{{symbol.latex}}"></li>
                {% endfor %}
            </ul>
            <input tabIndex="1" class="input-area"></input>
            <div class="preview"></div>
            <div class="actions">
                <button>export</button>
            </div>
       </div>

        <script type="text/javascript">

         // grab all elements in DOM with the class 'equation'
         var tex = document.getElementsByClassName("equation");

         // for each element, render the expression attribute
         Array.prototype.forEach.call(tex, function(el) {
             var expr = el.getAttribute("data-expr") + '';
             katex.render(expr, el);
         });

         var previewEl = document.querySelector('.preview');
         var inputEl = document.querySelector('.input-area');
         inputEl.addEventListener('keyup', function preview(e) {

             var newExpr = inputEl.value;
             katex.render(newExpr, previewEl);
         });
        </script>
  </body>

</html>
