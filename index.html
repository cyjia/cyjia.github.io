<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>做好你自己</title>
    <link rel="stylesheet" href="style.css" type="text/css" />
  </head>
  <body>
    <h1>Test leanCloud</h1>
    <form action="" method="POST">
      <label>Name:</label> <input id="name" type="text"/>
      <label>Age:</label> <input id="age" type="text"/>
      <input type="button" value="Create" onclick="createObject();"/>
    </form>
    <form action="" method="POST">
      <label>Name:</label> <input type="text"/>
      <label>Phone:</label> <input type="text"/>
      <input type="button" value="Send Sms Code" onclick="sendSmsCode();"/>
    </form>
    <form action="" method="POST">
      <input type="button" value="Verify Sms Code" onclick="verifySmsCode();"/>
    </form>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="https://leancloud.cn/scripts/lib/av-0.4.5.min.js"></script>
    <script>
        AV.initialize("g49w0dsbp4ytr84i7n9f5h7lmzv5duv58ora9q4k6pwn089u",
              "lzrsmpku4fr5i1z5or5s0ln2ltkeprqcgl3w67znwxxloqqq");
        function createObject() {
          var TestObject2 = AV.Object.extend("TestObject2");
          var testObject = new TestObject2();
          testObject.save(
              {name: $("#name").val(), age: $("#age").val()},
              { success: function(object) {
                  alert("Saved " + $("#name").val() + "," + $("#age").val());
                    }});
        }
       function sendSmsCode() {
         AV.Cloud.requestSmsCode({
                  mobilePhoneNumber: '18501089799',
                  name: 'PP打车',
                  date: '2014 年 10 月 22 号',
                  ttl: 5
               }).then(function(){
                  alert("Sended");
               }, function(err){
                         //发送失败
                  alert("Send fail");
                     });
       }
      function verifySmsCode() {
         AV.Cloud.verifySmsCode('323031').then(function(){
           alert("verified");
         },
         function(err) {
           alert("Error");
         });
      }
    </script>
  </body>
</html>
